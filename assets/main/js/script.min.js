import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function slider(){if(document.querySelector(".slider-image")){let r=!1;var t=new Swiper(".slider-image",{slidesPerView:1,watchSlidesProgress:!0,speed:1e3,loop:!1,allowTouchMove:!0,allowTouchMove:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".slider-paginations",type:"fraction"},on:{slideChangeTransitionStart:function(){var t,e;r||(r=!0,t=document.querySelectorAll(".current-title, .current-caption"),e=document.querySelectorAll(".current-title-big"),gsap.to(t,{autoAlpha:0,y:-20,ease:"power2.out",duration:.3}),0<e.length&&e.forEach(t=>{var e=t.querySelectorAll(".char");0<e.length?gsap.to(e,{"will-change":"opacity, transform",transformOrigin:"bottom center",opacity:0,rotationX:0,z:0,ease:"power2.in",duration:.3,stagger:.02}):gsap.to(t,{rotationX:90,autoAlpha:0,transformOrigin:"bottom center",ease:"power2.in",duration:.4})}),setTimeout(()=>{var t=this.slides[this.activeIndex],e=t.getAttribute("data-title"),r=t.getAttribute("data-caption"),t=t.getAttribute("data-title-big"),i=document.querySelector(".slider-captions");if(i){let t="";e&&(t+=`<h3 class='current-title mb-2'>${e}</h3>`),r&&(t+=`<p class='current-caption mb-0'>${r}</p>`),i.innerHTML=t}e=document.querySelector(".caption-image"),e&&(t?(e.innerHTML=`<h2 class='current-title-big mb-0'>${t}</h2>`,(r=e.querySelector(".current-title-big"))&&"undefined"!=typeof SplitText?(i=new SplitText(r,{type:"chars",charsClass:"char"}),gsap.set(r,{perspective:1e3}),i.chars.forEach(t=>gsap.set(t.parentNode,{perspective:1e3})),gsap.fromTo(i.chars,{"will-change":"opacity, transform",transformOrigin:"bottom center",opacity:0,rotationX:90,z:200},{ease:"power1",opacity:1,stagger:.05,rotationX:0,z:0,duration:.6,delay:.3})):gsap.fromTo(r,{rotationX:90,autoAlpha:0,transformOrigin:"bottom center"},{rotationX:0,autoAlpha:1,transformOrigin:"bottom center",ease:"power1",duration:.6,delay:.3})):e.innerHTML=""),t=document.querySelectorAll(".current-title, .current-caption");gsap.fromTo(t,{autoAlpha:0,y:20},{autoAlpha:1,y:0,ease:"power2.out",duration:.4,delay:.1,stagger:.1})},200))},slideChangeTransitionEnd:function(){r=!1},progress(r){r.slides.forEach(t=>{var e=(t.progress||0)*(.9*r.width);isNaN(e)||(t=t.querySelector(".parallax-img"))&&(t.style.transform=`translate3d(${e}px, 0, 0)`)})},touchStart(t){t.slides.forEach(t=>{t.style.transition=""})},setTransition(t,e){let r="cubic-bezier(0.25, 0.1, 0.25, 1)";t.slides.forEach(t=>{t.style.transition=e+"ms "+r;t=t.querySelector(".parallax-img");t&&(t.style.transition=e+"ms "+r)})}}}),t=t.slides[t.activeIndex],e=t.getAttribute("data-title"),i=t.getAttribute("data-caption"),t=t.getAttribute("data-title-big"),a=document.querySelector(".slider-captions");if(a){let t="";e&&(t+=`<h3 class='current-title mb-2'>${e}</h3>`),i&&(t+=`<p class='current-caption mb-0'>${i}</p>`),a.innerHTML=t}e=document.querySelector(".caption-image");e&&(t?(e.innerHTML=`<h2 class='current-title-big mb-0'>${t}</h2>`,(i=e.querySelector(".current-title-big"))&&"undefined"!=typeof SplitText?(a=new SplitText(i,{type:"chars",charsClass:"char"}),gsap.set(i,{perspective:1e3}),a.chars.forEach(t=>gsap.set(t.parentNode,{perspective:1e3})),gsap.fromTo(a.chars,{"will-change":"opacity, transform",transformOrigin:"bottom center",opacity:0,rotationX:90,z:-200},{ease:"power1",opacity:1,stagger:.05,rotationX:0,z:0,duration:.8,delay:.5})):gsap.fromTo(i,{rotationX:90,autoAlpha:0,transformOrigin:"bottom center"},{rotationX:0,autoAlpha:1,transformOrigin:"bottom center",ease:"power1",duration:.8,delay:.5})):e.innerHTML="")}}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{lenis.raf(1e3*t)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),slider()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(t){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});