import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function slider(){$("section.slider").length<1||document.querySelectorAll("section.slider").forEach(i=>{let r=!1;var e=new Swiper(i.querySelector(".slider-image"),{slidesPerView:1,watchSlidesProgress:!0,speed:1e3,loop:!1,allowTouchMove:!1,navigation:{nextEl:i.querySelector(".swiper-button-next"),prevEl:i.querySelector(".swiper-button-prev")},pagination:{el:i.querySelector(".slider-paginations"),type:"fraction"},on:{slideChangeTransitionStart:function(){var e,t;r||(r=!0,e=i.querySelectorAll(".current-title, .current-caption"),t=i.querySelectorAll(".current-title-big"),gsap.to(e,{autoAlpha:0,y:-20,ease:"power2.out",duration:.3}),0<t.length&&t.forEach(e=>{var t=e.querySelectorAll(".char");0<t.length?gsap.to(t,{rotateX:90,opacity:0,transformOrigin:"50% 0%",ease:"power2.in",duration:.5,stagger:{each:.02,from:"start"}}):gsap.to(e,{rotateX:90,opacity:0,transformOrigin:"50% 0%",ease:"power2.in",duration:.5})}),setTimeout(()=>{var e=this.slides[this.activeIndex],t=e.getAttribute("data-title"),r=e.getAttribute("data-caption"),e=e.getAttribute("data-title-big"),a=i.querySelector(".slider-captions");if(a){let e="";t&&(e+=`<h3 class='current-title mb-2'>${t}</h3>`),r&&(e+=`<p class='current-caption mb-0'>${r}</p>`),a.innerHTML=e}t=i.querySelector(".caption-image"),t&&(e?(t.innerHTML=`<h2 class='current-title-big mb-0'>${e}</h2>`,(r=t.querySelector(".current-title-big"))&&"undefined"!=typeof SplitText?(a=new SplitText(r,{type:"chars",charsClass:"char"}),gsap.set(r,{perspective:1e3,transformStyle:"preserve-3d"}),a.chars.forEach(e=>{gsap.set(e,{display:"inline-block",transformStyle:"preserve-3d",transformOrigin:"50% 100%"})}),gsap.fromTo(a.chars,{rotateX:-90,opacity:0},{rotateX:0,opacity:1,ease:"power2.out",duration:.6,delay:.1,stagger:{each:.03,from:"start"}})):gsap.fromTo(r,{rotateX:-90,opacity:0,transformOrigin:"50% 100%"},{rotateX:0,opacity:1,ease:"power2.out",duration:.6,delay:.1})):t.innerHTML=""),e=i.querySelectorAll(".current-title, .current-caption");gsap.fromTo(e,{autoAlpha:0,y:20},{autoAlpha:1,y:0,ease:"power2.out",duration:.4,delay:.1,stagger:.1})},250))},slideChangeTransitionEnd:function(){r=!1},progress(r){r.slides.forEach(e=>{var t=(e.progress||0)*(.9*r.width);isNaN(t)||(e=e.querySelector(".parallax-img"))&&(e.style.transform=`translate3d(${t}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,t){let r="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=t+"ms "+r;e=e.querySelector(".parallax-img");e&&(e.style.transition=t+"ms "+r)})}}}),e=e.slides[e.activeIndex],t=e.getAttribute("data-title"),a=e.getAttribute("data-caption"),e=e.getAttribute("data-title-big"),o=i.querySelector(".slider-captions");if(o){let e="";t&&(e+=`<h3 class='current-title mb-2'>${t}</h3>`),a&&(e+=`<p class='current-caption mb-0'>${a}</p>`),o.innerHTML=e}t=i.querySelector(".caption-image");t&&e&&(t.innerHTML=`<h2 class='current-title-big mb-0'>${e}</h2>`,a=t.querySelector(".current-title-big"))&&"undefined"!=typeof SplitText&&(o=new SplitText(a,{type:"chars",charsClass:"char"}),gsap.set(a,{perspective:1e3,transformStyle:"preserve-3d"}),o.chars.forEach(e=>{gsap.set(e,{display:"inline-block",transformStyle:"preserve-3d",transformOrigin:"50% 100%"})}),gsap.fromTo(o.chars,{rotateX:-90,opacity:0},{rotateX:0,opacity:1,ease:"power2.out",duration:.8,delay:.5,stagger:{each:.03,from:"start"}}))})}function header(){if(!($("#header").length<1)){var r=new Swiper(".header-popup__background",{direction:"vertical",slidesPerView:3,centeredSlides:!0,loop:!0,autoplay:!1,pagination:!1,navigation:!1,allowTouchMove:!1,simulateTouch:!1,slideToClickedSlide:!1,mousewheel:!1,keyboard:!1,preventClicks:!0,preventClicksPropagation:!0,watchOverflow:!0,spaceBetween:20,speed:500,initialSlide:0,on:{init:function(){$(".header-popup__background .swiper-slide").css("pointer-events","none")}}});$(".header-popup__nav .nav-item").on("mouseenter",function(){var e=$(this).index();r.slideToLoop(e),$(".header-popup__nav .nav-item").removeClass("active"),$(this).addClass("active")});let e=$(".btn-header__menu"),t=$(".header-popup");e.on("click",function(){e.toggleClass("open"),t.toggleClass("open"),t.hasClass("open")?lenis.stop():lenis.start()}),gsap.registerPlugin(ScrollTrigger),ScrollTrigger.create({start:"top top",end:"bottom bottom",onUpdate:e=>{var t=$("#header, .cta-calling");0===window.scrollY?t.removeClass("scroll-down scrolling"):(t.addClass("scrolling"),1===e.direction?t.addClass("scroll-down"):t.removeClass("scroll-down"))}})}}function initParallaxImages(){document.querySelectorAll(".parallax-picture img").forEach(e=>{gsap.to(e,{yPercent:-15,ease:"none",scrollTrigger:{trigger:e.parentElement,start:"top 70%",end:"bottom top",scrub:!0}})})}function placeTextAnimation(){document.querySelector(".place-text")&&gsap.utils.toArray(".place-text__line").forEach((e,t)=>{var t=(t+1)%2!=0,r=t?"-10%":"10%";gsap.set(e,{x:t?"50%":"-50%"}),gsap.to(e,{x:r,ease:"power2.out",scrollTrigger:{trigger:".place-text",start:"top bottom",end:"bottom 30%",scrub:1}})})}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),slider(),header(),initParallaxImages(),placeTextAnimation()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});